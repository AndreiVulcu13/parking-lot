plugins {
    id 'java'
    id 'war'
}

group = 'com.parkinglot'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

java {
    sourceCompatibility = JavaVersion.VERSION_21
    targetCompatibility = JavaVersion.VERSION_21
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

/*
 * NECESAR pentru teste JPA (persistence.xml în test)
 */
sourceSets {
    main {
        output.resourcesDir = "build/classes/java/main"
    }
    test {
        output.resourcesDir = "build/classes/java/test"
    }
}

dependencies {

    /* Jakarta EE – server */
    compileOnly("jakarta.platform:jakarta.jakartaee-api:10.0.0")

    /* NECESAR pentru teste (EJBException) */
    testImplementation("jakarta.ejb:jakarta.ejb-api:4.0.1")

    /* JSTL */
    compileOnly("org.glassfish.web:jakarta.servlet.jsp.jstl:3.0.1")

    /* JUnit 5 */
    testImplementation("org.junit.jupiter:junit-jupiter-api:5.10.2")
    testRuntimeOnly("org.junit.jupiter:junit-jupiter-engine:5.10.2")

    /* Hibernate + H2 (TESTE) */
    testImplementation("org.hibernate.orm:hibernate-core:6.4.4.Final")
    testImplementation("com.h2database:h2:2.2.224")
}

test {
    useJUnitPlatform()
}